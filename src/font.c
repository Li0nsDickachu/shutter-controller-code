#include "font.h"
#include "defines.h"

int put_character(font_character_t character, int x_coord, uint16_t matrix[5]) {
    for (int y = 0; y < MATRIX_HEIGHT; y++) {
        int64_t shift = (MATRIX_WIDTH - character.width) - x_coord;

        if (shift >= 16 || -shift >= 16){
            break;
        }

        if (shift > 0)
            matrix[y] |= (uint16_t)character.bitmap[y] << shift;
        else
            matrix[y] |= (uint16_t)character.bitmap[y] >> -shift;
    }

    return x_coord + character.width + 1;
}

int put_string(char* string, int x_coord, font_character_t font[127], uint16_t matrix[5]) {
    for (int i = 0; i < strlen(string); i++) {
        x_coord = put_character(font[string[i]], x_coord, matrix);
    }

    return x_coord;
}

const font_character_t character_infinity[2] = {
    {8, {
    0b01100011,
    0b10010100,
    0b10001000,
    0b10010100,
    0b01100011
    }}, {1, {
    0b0,
    0b1,
    0b1,
    0b1,
    0b0
    }}
};

const font_character_t narrow_font[127] = {
    {},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},
    {3, {
    0b111,
    0b101,
    0b101,
    0b101,
    0b111
    }},{3, {
    0b001,
    0b001,
    0b001,
    0b001,
    0b001
    }},{3, {
    0b111,
    0b001,
    0b111,
    0b100,
    0b111
    }},{3, {
    0b111,
    0b001,
    0b011,
    0b001,
    0b111
    }},{3, {
    0b101,
    0b101,
    0b111,
    0b001,
    0b001
    }},{3, {
    0b111,
    0b100,
    0b111,
    0b001,
    0b111
    }},{3, {
    0b011,
    0b100,
    0b111,
    0b101,
    0b010
    }},{3, {
    0b111,
    0b001,
    0b001,
    0b001,
    0b001
    }},{3, {
    0b111,
    0b101,
    0b111,
    0b101,
    0b111
    }},{3, {
    0b010,
    0b101,
    0b111,
    0b001,
    0b110
    }}
};

const font_character_t wide_font[127] = {
    {},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},
    {2, {}//SPACE
    },{},{},{},{},{},{},{},{},{},{},{},{},
    {4, {//-
    0b0000,
    0b0000,
    0b1111,
    0b0000,
    0b0000
    }},
    {},{},
    {4, {
    0b0110,
    0b1001,
    0b1001,
    0b1001,
    0b0110
    }},{4, {
    0b0010,
    0b0110,
    0b0010,
    0b0010,
    0b0010
    }},{4, {
    0b0110,
    0b1001,
    0b0010,
    0b0100,
    0b1111
    }},{4, {
    0b1110,
    0b0001,
    0b0110,
    0b0001,
    0b1110
    }},{4, {
    0b1001,
    0b1001,
    0b1111,
    0b0001,
    0b0001
    }},{4, {
    0b1111,
    0b1000,
    0b1110,
    0b0001,
    0b1110
    }},{4, {
    0b0110,
    0b1000,
    0b1110,
    0b1001,
    0b0110
    }},{4, {
    0b1111,
    0b0001,
    0b0001,
    0b0010,
    0b0010
    }},{4, {
    0b0110,
    0b1001,
    0b0110,
    0b1001,
    0b0110
    }},{4, {//9
    0b0110,
    0b1001,
    0b0111,
    0b0001,
    0b0110
    }},{1, {//:
    0b0,
    0b1,
    0b0,
    0b1,
    0b0
    }},
    {},//;
    {3, {//<
    0b001,
    0b010,
    0b100,
    0b010,
    0b001
    }},
    {},//=
    {},//>
    {},//?
    {},//@
    {4, {//A
    0b0110,
    0b1001,
    0b1111,
    0b1001,
    0b1001
    }},{4, {//B
    0b1110,
    0b1001,
    0b1110,
    0b1001,
    0b1110
    }},{4, {//C
    0b0110,
    0b1001,
    0b1000,
    0b1001,
    0b0110
    }},{4, {//D
    0b1110,
    0b1001,
    0b1001,
    0b1001,
    0b1100
    }},{4, {//E
    0b1111,
    0b1000,
    0b1110,
    0b1000,
    0b1111
    }},{4, {//F
    0b1111,
    0b1000,
    0b1110,
    0b1000,
    0b1000
    }},{4, {//G
    0b0110,
    0b1000,
    0b1011,
    0b1001,
    0b0110
    }},{4, {//H
    0b1001,
    0b1001,
    0b1111,
    0b1001,
    0b1001
    }},{1, {//I
    0b1,
    0b1,
    0b1,
    0b1,
    0b1
    }},{4, {//J
    0b0001,
    0b0001,
    0b0001,
    0b1001,
    0b0110
    }},{4, {//K
    0b1001,
    0b1010,
    0b1100,
    0b1010,
    0b1001
    }},{4, {//L
    0b1000,
    0b1000,
    0b1000,
    0b1000,
    0b1111
    }},{5, {//M
    0b10001,
    0b11011,
    0b10101,
    0b10001,
    0b10001
    }},{5, {//N
    0b10001,
    0b11001,
    0b10101,
    0b10011,
    0b10001
    }},{5, {//O
    0b01110,
    0b10001,
    0b10001,
    0b10001,
    0b01110
    }},{4, {//P
    0b1111,
    0b1001,
    0b1111,
    0b1000,
    0b1000
    }},{4, {//Q
    0b0110,
    0b1001,
    0b1001,
    0b1011,
    0b0111
    }},{4, {//R
    0b1110,
    0b1001,
    0b1110,
    0b1010,
    0b1001
    }},{4, {//S
    0b0111,
    0b1000,
    0b0110,
    0b0001,
    0b1110
    }},{5, {//T
    0b11111,
    0b00100,
    0b00100,
    0b00100,
    0b00100
    }},{4, {//U
    0b1001,
    0b1001,
    0b1001,
    0b1001,
    0b0110
    }},{5, {//V
    0b10001,
    0b10001,
    0b01010,
    0b01010,
    0b00100
    }},{5, {//W
    0b10001,
    0b10001,
    0b10101,
    0b10101,
    0b01010
    }},{5, {//X
    0b10001,
    0b01010,
    0b00100,
    0b01010,
    0b10001
    }},{5, {//Y
    0b10001,
    0b01010,
    0b00100,
    0b00100,
    0b00100
    }},{5, {//Z
    0b11111,
    0b00010,
    0b00100,
    0b01000,
    0b11111
    }}, {}, {}, {}, {}, {}, {},
    {4, {//a
    0b0000,
    0b0110,
    0b1001,
    0b1011,
    0b0101
    }},{4, {//b
    0b1000,
    0b1000,
    0b1110,
    0b1001,
    0b1110
    }},{3, {//c
    0b000,
    0b011,
    0b100,
    0b100,
    0b011
    }},{4, {//d
    0b0001,
    0b0001,
    0b0111,
    0b1001,
    0b0111
    }},{4, {//e
    0b0110,
    0b1001,
    0b1110,
    0b1000,
    0b0110
    }},{4, {//f
    0b0011,
    0b0100,
    0b1111,
    0b0100,
    0b0100
    }},{4, {//g
    0b0111,
    0b1001,
    0b0111,
    0b0001,
    0b0110
    }},{4, {//h
    0b1000,
    0b1000,
    0b1110,
    0b1001,
    0b1001
    }},{1, {//i
    0b1,
    0b0,
    0b1,
    0b1,
    0b1
    }},{3, {//j
    0b001,
    0b000,
    0b001,
    0b001,
    0b110
    }},{3, {//k
    0b000,
    0b100,
    0b101,
    0b110,
    0b101
    }},{3, {//l
    0b100,
    0b100,
    0b100,
    0b100,
    0b011
    }},{5, {//m
    0b11010,
    0b10101,
    0b10001,
    0b10001,
    0b10001
    }},{4, {//n
    0b1010,
    0b1101,
    0b1001,
    0b1001,
    0b1001
    }},{4, {//o
    0b0000,
    0b0110,
    0b1001,
    0b1001,
    0b0110
    }},{4, {//p
    0b1110,
    0b1001,
    0b1110,
    0b1000,
    0b1000
    }},{4, {//q
    0b0111,
    0b1001,
    0b0111,
    0b0001,
    0b0001
    }},{4, {//r
    0b1010,
    0b1101,
    0b1000,
    0b1000,
    0b1000
    }},{4, {//s
    0b0110,
    0b1000,
    0b0110,
    0b0001,
    0b0110
    }},{4, {//t
    0b0100,
    0b1111,
    0b0100,
    0b0100,
    0b0011
    }},{4, {//u
    0b1001,
    0b1001,
    0b1001,
    0b1011,
    0b0101
    }},{5, {//v
    0b00000,
    0b10001,
    0b10001,
    0b01010,
    0b00100
    }},{5, {//w
    0b00000,
    0b10001,
    0b10001,
    0b10101,
    0b01010
    }},{4, {//x
    0b0000,
    0b1001,
    0b0110,
    0b0110,
    0b1001
    }},{5, {//y
    0b1001,
    0b1001,
    0b0111,
    0b0001,
    0b1110
    }},{5, {//z
    0b0000,
    0b1111,
    0b0010,
    0b0100,
    0b1111
    }}
};
